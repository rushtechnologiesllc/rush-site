<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Open in Rush</title>
  <script>
    function isIOSiPhone() {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      return /iPhone/i.test(ua);
    }

    window.onload = () => {
      const params = new URLSearchParams(location.search);
      const id = params.get("id");

      if (!id) {
        window.location.href = "https://apps.apple.com/app/id6744488351";
        return;
      }

      if (isIOSiPhone()) {
        // Try to deep link into the app
        window.location.href = `rushapp://student-event?id=${id}`;
        setTimeout(() => {
          window.location.replace("https://apps.apple.com/app/id6744488351");
        }, 4000);
      } else {
        // Not on iPhone — show message instead of redirecting
        document.body.innerHTML = `
          <div style="display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background:black;color:white;text-align:center;padding:20px;">
            <h2>Please open this link on an iPhone</h2>
          </div>
        `;
      }
    };
  </script>
</head>
<body style="background:black;color:white;display:flex;justify-content:center;align-items:center;height:100vh;">
  <h2>Launching Rush…</h2>
</body>
</html>
